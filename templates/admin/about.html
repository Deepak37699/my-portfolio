<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage About Info | Portfolio Admin</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
    
    <style>
        .sidebar {
            min-height: calc(100vh - 56px);
            background-color: #343a40;
        }
        
        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.75);
            padding: 1rem;
        }
        
        .sidebar .nav-link:hover {
            color: #fff;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .sidebar .nav-link.active {
            color: #fff;
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .sidebar .nav-link i {
            margin-right: 0.5rem;
        }
        
        .profile-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .profile-image-placeholder {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            margin: 0 auto 1rem;
        }
        
        .info-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .info-card h5 {
            color: #007bff;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .form-floating {
            margin-bottom: 1rem;
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background: #f8f9fa;
            border-radius: 25px;
            text-decoration: none;
            color: #495057;
            transition: all 0.3s;
        }
        
        .social-link:hover {
            color: #007bff;
            background: #e3f2fd;
            transform: translateY(-2px);
        }
        
        .social-link i {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin: 0 auto 1rem;
        }
        
        .preview-section {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn-save {
            background: linear-gradient(135deg, #28a745, #20c997);
            border: none;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-save:hover {
            background: linear-gradient(135deg, #20c997, #28a745);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }
        
        .character-count {
            font-size: 0.8rem;
            color: #6c757d;
        }
        
        .education-item, .certification-item, .language-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Portfolio Admin</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link" href="/" target="_blank"><i class="fas fa-eye"></i> View Site</a>
                    <a class="nav-link" href="/auth/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="/admin/dashboard">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/admin/projects">
                                <i class="fas fa-project-diagram"></i> Projects
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/admin/skills">
                                <i class="fas fa-code"></i> Skills
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/admin/messages">
                                <i class="fas fa-envelope"></i> Messages
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="/admin/about">
                                <i class="fas fa-user"></i> About Me
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
                    <h1><i class="fas fa-user"></i> Manage About Information</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button type="button" class="btn btn-outline-primary" onclick="previewChanges()">
                            <i class="fas fa-eye"></i> Preview
                        </button>
                    </div>
                </div>

                <!-- Success/Error Messages -->
                {% if success_message %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <i class="fas fa-check-circle"></i> {{ success_message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endif %}

                {% if error_message %}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-circle"></i> {{ error_message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endif %}

                <!-- Profile Overview -->
                <div class="profile-section">
                    <div class="row align-items-center">
                        <div class="col-md-3 text-center">
                            {% if about.profile_image %}
                                <img src="/static/images/{{ about.profile_image }}" alt="Profile" class="rounded-circle" style="width: 150px; height: 150px; object-fit: cover;">
                            {% else %}
                                <div class="profile-image-placeholder">
                                    {{ about.name[0]|upper if about.name else 'U' }}
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-md-9">
                            <h2>{{ about.name or 'Your Name' }}</h2>
                            <h4 class="text-primary">{{ about.title or 'Your Title' }}</h4>
                            <p class="text-muted">{{ about.location or 'Your Location' }}</p>
                            
                            <div class="social-links mt-3">
                                {% if about.email %}
                                <a href="mailto:{{ about.email }}" class="social-link">
                                    <i class="fas fa-envelope"></i> Email
                                </a>
                                {% endif %}
                                {% if about.linkedin %}
                                <a href="{{ about.linkedin }}" target="_blank" class="social-link">
                                    <i class="fab fa-linkedin"></i> LinkedIn
                                </a>
                                {% endif %}
                                {% if about.github %}
                                <a href="{{ about.github }}" target="_blank" class="social-link">
                                    <i class="fab fa-github"></i> GitHub
                                </a>
                                {% endif %}
                                {% if about.phone %}
                                <a href="tel:{{ about.phone }}" class="social-link">
                                    <i class="fas fa-phone"></i> Phone
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h4>{{ about.years_experience or 0 }}</h4>
                        <p class="text-muted">Years Experience</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h4>{{ about.education|length if about.education else 0 }}</h4>
                        <p class="text-muted">Education</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-certificate"></i>
                        </div>
                        <h4>{{ about.certifications|length if about.certifications else 0 }}</h4>
                        <p class="text-muted">Certifications</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-language"></i>
                        </div>
                        <h4>{{ about.languages|length if about.languages else 0 }}</h4>
                        <p class="text-muted">Languages</p>
                    </div>
                </div>

                <!-- Edit Form -->
                <form action="/admin/about/update" method="post">
                    <div class="row">
                        <!-- Basic Information -->
                        <div class="col-lg-6">
                            <div class="info-card">
                                <h5><i class="fas fa-user"></i> Basic Information</h5>
                                
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="name" name="name" placeholder="Full Name" value="{{ about.name or '' }}" required>
                                    <label for="name">Full Name *</label>
                                </div>
                                
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="title" name="title" placeholder="Professional Title" value="{{ about.title or '' }}" required>
                                    <label for="title">Professional Title *</label>
                                </div>
                                
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="location" name="location" placeholder="Location" value="{{ about.location or '' }}" required>
                                    <label for="location">Location *</label>
                                </div>
                                
                                <div class="form-floating">
                                    <textarea class="form-control" id="bio" name="bio" placeholder="Biography" style="height: 120px;" required onkeyup="updateCharCount()">{{ about.bio or '' }}</textarea>
                                    <label for="bio">Biography *</label>
                                </div>
                                <div class="character-count">
                                    <span id="bioCharCount">{{ about.bio|length if about.bio else 0 }}</span> characters
                                </div>
                                
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="profile_image" name="profile_image" placeholder="profile.jpg" value="{{ about.profile_image or '' }}">
                                    <label for="profile_image">Profile Image Filename</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Contact Information -->
                        <div class="col-lg-6">
                            <div class="info-card">
                                <h5><i class="fas fa-address-book"></i> Contact Information</h5>
                                
                                <div class="form-floating">
                                    <input type="email" class="form-control" id="email" name="email" placeholder="email@example.com" value="{{ about.email or '' }}" required>
                                    <label for="email">Email Address *</label>
                                </div>
                                
                                <div class="form-floating">
                                    <input type="tel" class="form-control" id="phone" name="phone" placeholder="Phone Number" value="{{ about.phone or '' }}">
                                    <label for="phone">Phone Number</label>
                                </div>
                                
                                <div class="form-floating">
                                    <input type="url" class="form-control" id="linkedin" name="linkedin" placeholder="https://linkedin.com/in/..." value="{{ about.linkedin or '' }}">
                                    <label for="linkedin">LinkedIn Profile</label>
                                </div>
                                
                                <div class="form-floating">
                                    <input type="url" class="form-control" id="github" name="github" placeholder="https://github.com/..." value="{{ about.github or '' }}">
                                    <label for="github">GitHub Profile</label>
                                </div>
                                
                                <div class="form-floating">
                                    <input type="url" class="form-control" id="resume_url" name="resume_url" placeholder="https://example.com/resume.pdf" value="{{ about.resume_url or '' }}">
                                    <label for="resume_url">Resume/CV URL</label>
                                </div>
                            </div>
                        </div>
                    </div>
                      <!-- Additional Information -->
                    <div class="row">
                        <!-- Education -->
                        <div class="col-lg-3">
                            <div class="info-card">
                                <h5><i class="fas fa-graduation-cap"></i> Education</h5>
                                {% if education_records %}
                                    {% for edu in education_records %}
                                    <div class="education-item">
                                        <strong>{{ edu.degree }}</strong><br>
                                        <small class="text-muted">{{ edu.institution }} ({{ edu.year }}){% if edu.grade %} - {{ edu.grade }}{% endif %}</small>
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No education information available.</p>
                                {% endif %}
                                <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="openEducationModal()">
                                    <i class="fas fa-plus"></i> Manage Education
                                </button>
                            </div>
                        </div>
                        
                        <!-- Experience -->
                        <div class="col-lg-3">
                            <div class="info-card">
                                <h5><i class="fas fa-briefcase"></i> Experience</h5>
                                {% if experience_records %}
                                    {% for exp in experience_records %}
                                    <div class="education-item">
                                        <strong>{{ exp.job_title }}</strong><br>
                                        <small class="text-muted">{{ exp.company }} ({{ exp.start_date }}{% if not exp.is_current %} - {{ exp.end_date }}{% else %} - Present{% endif %})</small>
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No experience information available.</p>
                                {% endif %}
                                <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="openExperienceModal()">
                                    <i class="fas fa-plus"></i> Manage Experience
                                </button>
                            </div>
                        </div>
                        
                        <!-- Certifications -->
                        <div class="col-lg-3">
                            <div class="info-card">
                                <h5><i class="fas fa-certificate"></i> Certifications</h5>
                                {% if certification_records %}
                                    {% for cert in certification_records %}
                                    <div class="certification-item">
                                        <strong>{{ cert.name }}</strong><br>
                                        <small class="text-muted">{{ cert.issuer }} ({{ cert.date }})</small>
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No certifications available.</p>
                                {% endif %}
                                <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="openCertificationModal()">
                                    <i class="fas fa-plus"></i> Manage Certifications
                                </button>
                            </div>
                        </div>
                        
                        <!-- Languages -->
                        <div class="col-lg-3">
                            <div class="info-card">
                                <h5><i class="fas fa-language"></i> Languages</h5>
                                {% if about.languages %}
                                    {% for lang in about.languages %}
                                    <div class="language-item">
                                        <strong>{{ lang.language }}</strong><br>
                                        <small class="text-muted">{{ lang.proficiency }}</small>
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    <p class="text-muted">No languages specified.</p>
                                {% endif %}
                                <button type="button" class="btn btn-outline-primary btn-sm mt-2" onclick="openLanguageModal()">
                                    <i class="fas fa-plus"></i> Manage Languages
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Save Button -->
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-save">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </form>
            </main>
        </div>
    </div>    <!-- Preview Modal -->
    <div class="modal fade" id="previewModal" tabindex="-1" aria-labelledby="previewModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="previewModalLabel">
                        <i class="fas fa-eye"></i> Profile Preview
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="preview-section">
                        <div class="text-center">
                            <div class="profile-image-placeholder d-inline-block">
                                <span id="previewInitial"></span>
                            </div>
                            <h3 id="previewName"></h3>
                            <h5 class="text-primary" id="previewTitle"></h5>
                            <p class="text-muted" id="previewLocation"></p>
                            <p id="previewBio"></p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Education Management Modal -->
    <div class="modal fade" id="educationModal" tabindex="-1" aria-labelledby="educationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="educationModalLabel">
                        <i class="fas fa-graduation-cap"></i> Manage Education
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Education Form -->
                    <form id="educationForm">
                        <input type="hidden" id="educationId" name="id">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="educationDegree" name="degree" placeholder="Degree" required>
                                    <label for="educationDegree">Degree *</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="educationInstitution" name="institution" placeholder="Institution" required>
                                    <label for="educationInstitution">Institution *</label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="educationYear" name="year" placeholder="Year" required>
                                    <label for="educationYear">Year *</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="educationGrade" name="grade" placeholder="Grade">
                                    <label for="educationGrade">Grade</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-floating mb-3">
                            <textarea class="form-control" id="educationDescription" name="description" placeholder="Description" style="height: 100px;"></textarea>
                            <label for="educationDescription">Description</label>
                        </div>
                    </form>
                    
                    <!-- Education List -->
                    <div class="mt-4">
                        <h6>Current Education Records</h6>
                        <div id="educationList">
                            <!-- Education items will be loaded here -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" onclick="saveEducation()">
                        <i class="fas fa-save"></i> Save Education
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Experience Management Modal -->
    <div class="modal fade" id="experienceModal" tabindex="-1" aria-labelledby="experienceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="experienceModalLabel">
                        <i class="fas fa-briefcase"></i> Manage Experience
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Experience Form -->
                    <form id="experienceForm">
                        <input type="hidden" id="experienceId" name="id">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="experienceJobTitle" name="job_title" placeholder="Job Title" required>
                                    <label for="experienceJobTitle">Job Title *</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="experienceCompany" name="company" placeholder="Company" required>
                                    <label for="experienceCompany">Company *</label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="experienceStartDate" name="start_date" placeholder="Start Date" required>
                                    <label for="experienceStartDate">Start Date *</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="experienceEndDate" name="end_date" placeholder="End Date">
                                    <label for="experienceEndDate">End Date</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-check mt-3">
                                    <input class="form-check-input" type="checkbox" id="experienceIsCurrent" name="is_current" onchange="toggleEndDate()">
                                    <label class="form-check-label" for="experienceIsCurrent">
                                        Current Position
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="experienceLocation" name="location" placeholder="Location">
                                    <label for="experienceLocation">Location</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="experienceEmploymentType" name="employment_type" placeholder="Employment Type">
                                    <label for="experienceEmploymentType">Employment Type</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-floating mb-3">
                            <textarea class="form-control" id="experienceDescription" name="description" placeholder="Description" style="height: 100px;"></textarea>
                            <label for="experienceDescription">Description</label>
                        </div>
                    </form>
                    
                    <!-- Experience List -->
                    <div class="mt-4">
                        <h6>Current Experience Records</h6>
                        <div id="experienceList">
                            <!-- Experience items will be loaded here -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" onclick="saveExperience()">
                        <i class="fas fa-save"></i> Save Experience
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Certification Management Modal -->
    <div class="modal fade" id="certificationModal" tabindex="-1" aria-labelledby="certificationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="certificationModalLabel">
                        <i class="fas fa-certificate"></i> Manage Certifications
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Certification Form -->
                    <form id="certificationForm">
                        <input type="hidden" id="certificationId" name="id">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="certificationName" name="name" placeholder="Certification Name" required>
                                    <label for="certificationName">Certification Name *</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="certificationIssuer" name="issuer" placeholder="Issuer" required>
                                    <label for="certificationIssuer">Issuer *</label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="certificationDate" name="date" placeholder="Date" required>
                                    <label for="certificationDate">Date *</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="certificationExpiryDate" name="expiry_date" placeholder="Expiry Date">
                                    <label for="certificationExpiryDate">Expiry Date</label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="certificationCredentialId" name="credential_id" placeholder="Credential ID">
                                    <label for="certificationCredentialId">Credential ID</label>
                                </div>
                            </div>                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="url" class="form-control" id="certificationUrl" name="credential_url" placeholder="Verification URL">
                                    <label for="certificationUrl">Verification URL</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-floating mb-3">
                            <textarea class="form-control" id="certificationDescription" name="description" placeholder="Description" style="height: 100px;"></textarea>
                            <label for="certificationDescription">Description</label>
                        </div>
                    </form>
                    
                    <!-- Certification List -->
                    <div class="mt-4">
                        <h6>Current Certifications</h6>
                        <div id="certificationList">
                            <!-- Certification items will be loaded here -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" onclick="saveCertification()">
                        <i class="fas fa-save"></i> Save Certification
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      <script>
        // Global variables for current editing
        let currentEducationId = null;
        let currentExperienceId = null;
        let currentCertificationId = null;

        function updateCharCount() {
            const bioText = document.getElementById('bio').value;
            document.getElementById('bioCharCount').textContent = bioText.length;
        }
        
        function previewChanges() {
            const name = document.getElementById('name').value || 'Your Name';
            const title = document.getElementById('title').value || 'Your Title';
            const location = document.getElementById('location').value || 'Your Location';
            const bio = document.getElementById('bio').value || 'Your biography will appear here.';
            
            document.getElementById('previewName').textContent = name;
            document.getElementById('previewTitle').textContent = title;
            document.getElementById('previewLocation').textContent = location;
            document.getElementById('previewBio').textContent = bio;
            document.getElementById('previewInitial').textContent = name.charAt(0).toUpperCase();
            
            new bootstrap.Modal(document.getElementById('previewModal')).show();
        }

        // Education Functions
        function openEducationModal() {
            clearEducationForm();
            loadEducationList();
            new bootstrap.Modal(document.getElementById('educationModal')).show();
        }

        function clearEducationForm() {
            document.getElementById('educationForm').reset();
            document.getElementById('educationId').value = '';
            currentEducationId = null;
        }        function loadEducationList() {
            fetch('/admin/api/education')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('educationList');
                    if (data.length === 0) {
                        container.innerHTML = '<p class="text-muted">No education records found.</p>';
                        return;
                    }
                    
                    container.innerHTML = data.map(edu => `
                        <div class="border rounded p-2 mb-2">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <strong>${edu.degree}</strong><br>
                                    <small class="text-muted">${edu.institution} (${edu.year})${edu.grade ? ' - ' + edu.grade : ''}</small>
                                    ${edu.description ? '<br><small>' + edu.description + '</small>' : ''}
                                </div>
                                <div class="btn-group btn-group-sm">
                                    <button type="button" class="btn btn-outline-primary" onclick="editEducation(${edu.id})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-outline-danger" onclick="deleteEducation(${edu.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                })
                .catch(error => {
                    console.error('Error loading education:', error);
                    showAlert('Error loading education records', 'danger');
                });
        }        function editEducation(id) {
            fetch(`/admin/api/education/${id}`)
                .then(response => response.json())
                .then(edu => {
                    document.getElementById('educationId').value = edu.id;
                    document.getElementById('educationDegree').value = edu.degree;
                    document.getElementById('educationInstitution').value = edu.institution;
                    document.getElementById('educationYear').value = edu.year;
                    document.getElementById('educationGrade').value = edu.grade || '';
                    document.getElementById('educationDescription').value = edu.description || '';
                    currentEducationId = id;
                })
                .catch(error => {
                    console.error('Error loading education:', error);
                    showAlert('Error loading education record', 'danger');
                });
        }        function saveEducation() {
            const form = document.getElementById('educationForm');
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());

            // Validate required fields
            if (!data.degree || !data.institution || !data.year) {
                showAlert('Please fill in all required fields (Degree, Institution, Year)', 'danger');
                return;
            }

            const url = currentEducationId ? `/admin/api/education/${currentEducationId}` : '/admin/api/education';
            const method = currentEducationId ? 'PUT' : 'POST';

            fetch(url, {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(error => {
                        throw new Error(error.detail || 'Unknown error occurred');
                    });
                }
                return response.json();
            })
            .then(result => {
                showAlert('Education saved successfully!', 'success');
                clearEducationForm();
                loadEducationList();
                // Reload the page to update the main display
                setTimeout(() => window.location.reload(), 1000);
            })
            .catch(error => {
                console.error('Error saving education:', error);
                showAlert(`Error saving education: ${error.message}`, 'danger');
            });
        }

        function deleteEducation(id) {
            if (!confirm('Are you sure you want to delete this education record?')) {
                return;
            }            fetch(`/admin/api/education/${id}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    showAlert('Education deleted successfully!', 'success');
                    loadEducationList();
                    // Reload the page to update the main display
                    setTimeout(() => window.location.reload(), 1000);
                } else {
                    throw new Error('Failed to delete education');
                }
            })
            .catch(error => {
                console.error('Error deleting education:', error);
                showAlert('Error deleting education', 'danger');
            });
        }

        // Experience Functions
        function openExperienceModal() {
            clearExperienceForm();
            loadExperienceList();
            new bootstrap.Modal(document.getElementById('experienceModal')).show();
        }

        function clearExperienceForm() {
            document.getElementById('experienceForm').reset();
            document.getElementById('experienceId').value = '';
            currentExperienceId = null;
        }

        function toggleEndDate() {
            const isCurrent = document.getElementById('experienceIsCurrent').checked;
            const endDateField = document.getElementById('experienceEndDate');
            if (isCurrent) {
                endDateField.value = '';
                endDateField.disabled = true;
            } else {
                endDateField.disabled = false;
            }
        }        function loadExperienceList() {
            fetch('/admin/api/experience')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('experienceList');
                    if (data.length === 0) {
                        container.innerHTML = '<p class="text-muted">No experience records found.</p>';
                        return;
                    }
                    
                    container.innerHTML = data.map(exp => `
                        <div class="border rounded p-2 mb-2">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <strong>${exp.job_title}</strong><br>
                                    <small class="text-muted">${exp.company} (${exp.start_date}${exp.is_current ? ' - Present' : (exp.end_date ? ' - ' + exp.end_date : '')})</small>
                                    ${exp.location ? '<br><small>📍 ' + exp.location + '</small>' : ''}
                                    ${exp.description ? '<br><small>' + exp.description + '</small>' : ''}
                                </div>
                                <div class="btn-group btn-group-sm">
                                    <button type="button" class="btn btn-outline-primary" onclick="editExperience(${exp.id})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-outline-danger" onclick="deleteExperience(${exp.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                })
                .catch(error => {
                    console.error('Error loading experience:', error);
                    showAlert('Error loading experience records', 'danger');
                });
        }        function editExperience(id) {
            fetch(`/admin/api/experience/${id}`)
                .then(response => response.json())
                .then(exp => {
                    document.getElementById('experienceId').value = exp.id;
                    document.getElementById('experienceJobTitle').value = exp.job_title;
                    document.getElementById('experienceCompany').value = exp.company;
                    document.getElementById('experienceStartDate').value = exp.start_date;
                    document.getElementById('experienceEndDate').value = exp.end_date || '';
                    document.getElementById('experienceIsCurrent').checked = exp.is_current;
                    document.getElementById('experienceLocation').value = exp.location || '';
                    document.getElementById('experienceEmploymentType').value = exp.employment_type || '';
                    document.getElementById('experienceDescription').value = exp.description || '';
                    currentExperienceId = id;
                    toggleEndDate();
                })
                .catch(error => {
                    console.error('Error loading experience:', error);
                    showAlert('Error loading experience record', 'danger');
                });
        }

        function saveExperience() {
            const form = document.getElementById('experienceForm');
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            
            // Convert checkbox to boolean
            data.is_current = document.getElementById('experienceIsCurrent').checked;

            const url = currentExperienceId ? `/admin/api/experience/${currentExperienceId}` : '/admin/api/experience';
            const method = currentExperienceId ? 'PUT' : 'POST';

            fetch(url, {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                showAlert('Experience saved successfully!', 'success');
                clearExperienceForm();
                loadExperienceList();
                // Reload the page to update the main display
                setTimeout(() => window.location.reload(), 1000);
            })
            .catch(error => {
                console.error('Error saving experience:', error);
                showAlert('Error saving experience', 'danger');
            });
        }

        function deleteExperience(id) {
            if (!confirm('Are you sure you want to delete this experience record?')) {
                return;
            }            fetch(`/admin/api/experience/${id}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    showAlert('Experience deleted successfully!', 'success');
                    loadExperienceList();
                    // Reload the page to update the main display
                    setTimeout(() => window.location.reload(), 1000);
                } else {
                    throw new Error('Failed to delete experience');
                }
            })
            .catch(error => {
                console.error('Error deleting experience:', error);
                showAlert('Error deleting experience', 'danger');
            });
        }

        // Certification Functions
        function openCertificationModal() {
            clearCertificationForm();
            loadCertificationList();
            new bootstrap.Modal(document.getElementById('certificationModal')).show();
        }

        function clearCertificationForm() {
            document.getElementById('certificationForm').reset();
            document.getElementById('certificationId').value = '';
            currentCertificationId = null;
        }        function loadCertificationList() {
            fetch('/admin/api/certifications')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('certificationList');
                    if (data.length === 0) {
                        container.innerHTML = '<p class="text-muted">No certification records found.</p>';
                        return;
                    }
                    
                    container.innerHTML = data.map(cert => `
                        <div class="border rounded p-2 mb-2">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <strong>${cert.name}</strong><br>
                                    <small class="text-muted">${cert.issuer} (${cert.date})${cert.expiry_date ? ' - Expires: ' + cert.expiry_date : ''}</small>
                                    ${cert.credential_id ? '<br><small>ID: ' + cert.credential_id + '</small>' : ''}
                                    ${cert.credential_url ? '<br><small><a href="' + cert.credential_url + '" target="_blank">Verify</a></small>' : ''}
                                    ${cert.description ? '<br><small>' + cert.description + '</small>' : ''}
                                </div>
                                <div class="btn-group btn-group-sm">
                                    <button type="button" class="btn btn-outline-primary" onclick="editCertification(${cert.id})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button type="button" class="btn btn-outline-danger" onclick="deleteCertification(${cert.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                })
                .catch(error => {
                    console.error('Error loading certifications:', error);
                    showAlert('Error loading certification records', 'danger');
                });
        }        function editCertification(id) {
            fetch(`/admin/api/certifications/${id}`)
                .then(response => response.json())
                .then(cert => {
                    document.getElementById('certificationId').value = cert.id;
                    document.getElementById('certificationName').value = cert.name;
                    document.getElementById('certificationIssuer').value = cert.issuer;
                    document.getElementById('certificationDate').value = cert.date;
                    document.getElementById('certificationExpiryDate').value = cert.expiry_date || '';
                    document.getElementById('certificationCredentialId').value = cert.credential_id || '';
                    document.getElementById('certificationUrl').value = cert.credential_url || '';
                    document.getElementById('certificationDescription').value = cert.description || '';
                    currentCertificationId = id;
                })
                .catch(error => {
                    console.error('Error loading certification:', error);
                    showAlert('Error loading certification record', 'danger');
                });
        }

        function saveCertification() {
            const form = document.getElementById('certificationForm');
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());

            const url = currentCertificationId ? `/admin/api/certifications/${currentCertificationId}` : '/admin/api/certifications';
            const method = currentCertificationId ? 'PUT' : 'POST';

            fetch(url, {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                showAlert('Certification saved successfully!', 'success');
                clearCertificationForm();
                loadCertificationList();
                // Reload the page to update the main display
                setTimeout(() => window.location.reload(), 1000);
            })
            .catch(error => {
                console.error('Error saving certification:', error);
                showAlert('Error saving certification', 'danger');
            });
        }

        function deleteCertification(id) {
            if (!confirm('Are you sure you want to delete this certification?')) {
                return;
            }            fetch(`/admin/api/certifications/${id}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    showAlert('Certification deleted successfully!', 'success');
                    loadCertificationList();
                    // Reload the page to update the main display
                    setTimeout(() => window.location.reload(), 1000);
                } else {
                    throw new Error('Failed to delete certification');
                }
            })
            .catch(error => {
                console.error('Error deleting certification:', error);
                showAlert('Error deleting certification', 'danger');
            });
        }

        // Utility function to show alerts
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
            alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            `;
            document.body.appendChild(alertDiv);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }
        
        // Auto-hide alerts after 5 seconds
        setTimeout(function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                const bsAlert = new bootstrap.Alert(alert);
                bsAlert.close();
            });
        }, 5000);
        
        // Form validation feedback
        const form = document.querySelector('form');
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        });
    </script>
</body>
</html>
